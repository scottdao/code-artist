<body>
    <table id="userRoleDatagrid"></table>
    <script>
        $('#userRoleDatagrid').datagrid({
            url: '/role',
            singleSelect: false,
            pagination: false,
            columns: [
                [{
                    field: 'id',
                    checkbox: true,
                }, {
                    field: 'name',
                    title: '菜单名称',
                    align: 'center',
                    width: 180
                }]
            ],
            onLoadSuccess: () => {
                let userJson = $("#adminDatagrid").datagrid('getSelected');
                $.get("/role/" + userJson.id, roleIds => {
                    roleIds.map(value => {
                        let rows = $('#userRoleDatagrid').datagrid('getRows');
                        rows.map((row, index) => {
                            if (row.id === value) {
                                $('#userRoleDatagrid').datagrid('checkRow', index);
                            }
                        });
                    });
                });
            }
        });
    </script>
</body>